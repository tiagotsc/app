function managerFrm(){return{search:"",data:{},selectall:!1,clicked:!1,selectedPermissions:[],allPermissions:[],loading:!1,buttonLabel:"Salvar",selected(e){let t=document.getElementById(`permission[${e}]`);1==t.checked?this.selectedPermissions.push(t.value):this.selectedPermissions=arrayRemove(this.selectedPermissions,t.value)},loadData(){fetch(document.getElementById("route_list").value).then((e=>e.json())).then((e=>{this.data=e.data,this.selectedPermissions=arrayColumn(e.data.permissions,"name"),this.allPermissions=e.allPermissions}))},allChecked(){this.clicked=!0,this.selectall=!this.selectall},get filteredIPermissions(){return this.allPermissions.filter((e=>(e.name.toLowerCase().indexOf(this.search.toLowerCase())>-1?e.show=!0:e.show=!1,e)))},submitData(){if($("#frm").valid()){this.buttonLabel="Aguarde...",this.loading=!0;let e=null!==document.querySelector('input[name="_method"]')?document.querySelector('input[name="_method"]').value:"";this.data.permission=this.selectedPermissions,this.data._method=e,this.data._token=document.head.querySelector("meta[name=csrf-token]").content,fetch(document.getElementById("frm").action,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.data)}).then((e=>{1!=e.ok&&swal("Algo errado!","Se persistir, fale com o administrador!","error"),e.json().then((e=>{swal("Muito bom!","Salvo com sucesso!","success").then((()=>{null!=e.redirect&&(window.location.href=e.redirect)}))}))})).catch((()=>{swal("Error grave!","Se persistir, fale com o administrador!","error")})).finally((()=>{this.loading=!1,this.buttonLabel="Salvar"}))}}}}
