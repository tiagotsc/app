function managerFrm(){return{search:"",data:{},allDestinations:{},loading:!1,buttonLabel:"Salvar",loadData(){fetch(document.getElementById("base_url").value+"/wallet/datajson").then((e=>e.json())).then((e=>{this.allDestinations=e.destinations,document.getElementById("balance").innerHTML=e.data.balance,document.getElementById("frm").action=e.link_update,document.getElementById("link_wallet").href=e.link_wallet}))},submitData(){$("#frm").valid()&&swal({title:"Deseja realizar transferÃªncia?",text:"",icon:"warning",buttons:!0,dangerMode:!0,buttons:["Cancelar","OK"]}).then((e=>{if(e){this.buttonLabel="Aguarde...",this.loading=!0;let e=null!==document.querySelector('input[name="_method"]')?document.querySelector('input[name="_method"]').value:"";this.data._method=e,this.data._token=document.head.querySelector("meta[name=csrf-token]").content,this.data.transfer=document.getElementById("transfer").value,fetch(document.getElementById("frm").action,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.data)}).then((e=>{1!=e.ok&&swal("Algo errado!","Se persistir, fale com o administrador!","error"),e.json().then((e=>{swal(e.title,e.msg,e.status),document.getElementById("balance").innerHTML=e.balance_now}))})).catch((()=>{swal("Error grave!","Se persistir, fale com o administrador!","error")})).finally((()=>{this.loading=!1,this.buttonLabel="Salvar",document.getElementById("transfer").value="",this.data={}}))}}))}}}
